
### 엔티티와 벨류의 구분

엔티티의 가장 큰 특징은 식별자를 가진다는 것. 벨류 타입은 개념적으로 완전한 하나를 표현할 때 사용한다.


### 표현, 응용, 도메인 ,인프라스트럭처
**표현 영역**은 사용자의 요청을 해석해서 응용 서비스에 전달하고 응용 서비스의 실행 결과를 사용자가 이해할 수있는 형식으로 변환하여 응답한다.
**응용 영역은** 도메인 모델을 이용해서 사용자에게 제공할 기능을 구현한다. 실제 도메인 로직 구현은 도메인 모델에 위임한다.
**인프라스트럭처 영역**은 구현 기술을 다룬다.

### DIP 주의 사항
DIP를 단순히 인터페이스와 구현 클래스를 분리하는 것으로 받아드려선 안된다. 고수준 모듈이 저수준 모듈에 의존하지 않도록 하기 위험인 만큼 추상화를 어떻게 할 지 고려하는 것 역시 중요하다.


### 애그리거트 루트에 대해
책의 예시를 들자면, 구매할 상품의 개수를 변경하면 OrderLine의 quantity를 변경하고, Order의 totalAmounts 역시 변경해야한다. 이때 이런 모든 로직을 책임질 루트 객체가 필요하다. 

만약 이를 서비스에서 구현하면 어떻게 될까. 동일한 검사 로직을 여러 응용 서비스에서 구현할 가능성이 높아진다.

추가로 한 애그리거트 루트가 다른 애그리거트를 참조하기도 한다.
이때 애그리거트 간의 의존 결합도가 높아지는데, 결과적으로 애그리거트의 변경을 어렵게 만든다.

때문에 다른 애그리거트를 참조할때는 ID 참조를 통해 이러한 문제를 완화할 수 있다.


### 애그리거트를 팩토리로 사용하기

우리는 어쩔 수 없이 도메인 로직 처리를 응용서비스에 노출시킬 때 가 있다.
팔로우, 블락처리 등 데이터베이스를 확인해야하는 경우, 특히 **중복검사를 하는 등의 경우가 그렇다.**

우리는 이를 해결하기 위해 애그리거트를 팩토리로 만들어 사용할 수 있다.









